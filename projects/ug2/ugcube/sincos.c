#include "sincos.h"
#include "macros.h"
#include "math.h"

#if defined(SYSTEM_ROM32K)
#define SINCOS_TABLE_ADDRESS (0x7e00)

#elif defined(SYSTEM_MSXDOS)
#define SINCOS_TABLE_ADDRESS (0x3e00)

#endif

#if !defined(SINCOS_TABLE_ADDRESS)
#error "not defined sincos table address"
#endif

// low precision (2:6 bit) sin full
SDCC_FIXED_ADDRESS(SINCOS_TABLE_ADDRESS) const fp2_6 g_fp2_6Sin[] =
{
	(fp2_6)0x00,(fp2_6)0x02,(fp2_6)0x04,(fp2_6)0x05,(fp2_6)0x07,(fp2_6)0x08,(fp2_6)0x0A,(fp2_6)0x0B,
	(fp2_6)0x0D,(fp2_6)0x0F,(fp2_6)0x10,(fp2_6)0x12,(fp2_6)0x13,(fp2_6)0x15,(fp2_6)0x16,(fp2_6)0x18,
	(fp2_6)0x19,(fp2_6)0x1A,(fp2_6)0x1C,(fp2_6)0x1D,(fp2_6)0x1F,(fp2_6)0x20,(fp2_6)0x21,(fp2_6)0x23,
	(fp2_6)0x24,(fp2_6)0x25,(fp2_6)0x27,(fp2_6)0x28,(fp2_6)0x29,(fp2_6)0x2A,(fp2_6)0x2B,(fp2_6)0x2D,
	(fp2_6)0x2E,(fp2_6)0x2F,(fp2_6)0x30,(fp2_6)0x31,(fp2_6)0x32,(fp2_6)0x33,(fp2_6)0x34,(fp2_6)0x35,
	(fp2_6)0x36,(fp2_6)0x37,(fp2_6)0x37,(fp2_6)0x38,(fp2_6)0x39,(fp2_6)0x3A,(fp2_6)0x3A,(fp2_6)0x3B,
	(fp2_6)0x3C,(fp2_6)0x3C,(fp2_6)0x3D,(fp2_6)0x3D,(fp2_6)0x3E,(fp2_6)0x3E,(fp2_6)0x3F,(fp2_6)0x3F,
	(fp2_6)0x3F,(fp2_6)0x40,(fp2_6)0x40,(fp2_6)0x40,(fp2_6)0x40,(fp2_6)0x40,(fp2_6)0x40,(fp2_6)0x40,
	(fp2_6)0x40,(fp2_6)0x40,(fp2_6)0x40,(fp2_6)0x40,(fp2_6)0x40,(fp2_6)0x40,(fp2_6)0x40,(fp2_6)0x40,
	(fp2_6)0x3F,(fp2_6)0x3F,(fp2_6)0x3F,(fp2_6)0x3E,(fp2_6)0x3E,(fp2_6)0x3D,(fp2_6)0x3D,(fp2_6)0x3C,
	(fp2_6)0x3C,(fp2_6)0x3B,(fp2_6)0x3A,(fp2_6)0x3A,(fp2_6)0x39,(fp2_6)0x38,(fp2_6)0x37,(fp2_6)0x37,
	(fp2_6)0x36,(fp2_6)0x35,(fp2_6)0x34,(fp2_6)0x33,(fp2_6)0x32,(fp2_6)0x31,(fp2_6)0x30,(fp2_6)0x2F,
	(fp2_6)0x2E,(fp2_6)0x2D,(fp2_6)0x2B,(fp2_6)0x2A,(fp2_6)0x29,(fp2_6)0x28,(fp2_6)0x27,(fp2_6)0x25,
	(fp2_6)0x24,(fp2_6)0x23,(fp2_6)0x21,(fp2_6)0x20,(fp2_6)0x1F,(fp2_6)0x1D,(fp2_6)0x1C,(fp2_6)0x1A,
	(fp2_6)0x19,(fp2_6)0x18,(fp2_6)0x16,(fp2_6)0x15,(fp2_6)0x13,(fp2_6)0x12,(fp2_6)0x10,(fp2_6)0x0F,
	(fp2_6)0x0D,(fp2_6)0x0B,(fp2_6)0x0A,(fp2_6)0x08,(fp2_6)0x07,(fp2_6)0x05,(fp2_6)0x04,(fp2_6)0x02,
	(fp2_6)0x00,(fp2_6)0xFE,(fp2_6)0xFC,(fp2_6)0xFB,(fp2_6)0xF9,(fp2_6)0xF8,(fp2_6)0xF6,(fp2_6)0xF5,
	(fp2_6)0xF3,(fp2_6)0xF1,(fp2_6)0xF0,(fp2_6)0xEE,(fp2_6)0xED,(fp2_6)0xEB,(fp2_6)0xEA,(fp2_6)0xE8,
	(fp2_6)0xE7,(fp2_6)0xE6,(fp2_6)0xE4,(fp2_6)0xE3,(fp2_6)0xE1,(fp2_6)0xE0,(fp2_6)0xDF,(fp2_6)0xDD,
	(fp2_6)0xDC,(fp2_6)0xDB,(fp2_6)0xD9,(fp2_6)0xD8,(fp2_6)0xD7,(fp2_6)0xD6,(fp2_6)0xD5,(fp2_6)0xD3,
	(fp2_6)0xD2,(fp2_6)0xD1,(fp2_6)0xD0,(fp2_6)0xCF,(fp2_6)0xCE,(fp2_6)0xCD,(fp2_6)0xCC,(fp2_6)0xCB,
	(fp2_6)0xCA,(fp2_6)0xC9,(fp2_6)0xC9,(fp2_6)0xC8,(fp2_6)0xC7,(fp2_6)0xC6,(fp2_6)0xC6,(fp2_6)0xC5,
	(fp2_6)0xC4,(fp2_6)0xC4,(fp2_6)0xC3,(fp2_6)0xC3,(fp2_6)0xC2,(fp2_6)0xC2,(fp2_6)0xC1,(fp2_6)0xC1,
	(fp2_6)0xC1,(fp2_6)0xC0,(fp2_6)0xC0,(fp2_6)0xC0,(fp2_6)0xC0,(fp2_6)0xC0,(fp2_6)0xC0,(fp2_6)0xC0,
	(fp2_6)0xC0,(fp2_6)0xC0,(fp2_6)0xC0,(fp2_6)0xC0,(fp2_6)0xC0,(fp2_6)0xC0,(fp2_6)0xC0,(fp2_6)0xC0,
	(fp2_6)0xC1,(fp2_6)0xC1,(fp2_6)0xC1,(fp2_6)0xC2,(fp2_6)0xC2,(fp2_6)0xC3,(fp2_6)0xC3,(fp2_6)0xC4,
	(fp2_6)0xC4,(fp2_6)0xC5,(fp2_6)0xC6,(fp2_6)0xC6,(fp2_6)0xC7,(fp2_6)0xC8,(fp2_6)0xC9,(fp2_6)0xC9,
	(fp2_6)0xCA,(fp2_6)0xCB,(fp2_6)0xCC,(fp2_6)0xCD,(fp2_6)0xCE,(fp2_6)0xCF,(fp2_6)0xD0,(fp2_6)0xD1,
	(fp2_6)0xD2,(fp2_6)0xD3,(fp2_6)0xD5,(fp2_6)0xD6,(fp2_6)0xD7,(fp2_6)0xD8,(fp2_6)0xD9,(fp2_6)0xDB,
	(fp2_6)0xDC,(fp2_6)0xDD,(fp2_6)0xDF,(fp2_6)0xE0,(fp2_6)0xE1,(fp2_6)0xE3,(fp2_6)0xE4,(fp2_6)0xE6,
	(fp2_6)0xE7,(fp2_6)0xE8,(fp2_6)0xEA,(fp2_6)0xEB,(fp2_6)0xED,(fp2_6)0xEE,(fp2_6)0xF0,(fp2_6)0xF1,
	(fp2_6)0xF3,(fp2_6)0xF5,(fp2_6)0xF6,(fp2_6)0xF8,(fp2_6)0xF9,(fp2_6)0xFB,(fp2_6)0xFC,(fp2_6)0xFE,
};

// High precision (2:14 bit) sin quoter plus
SDCC_FIXED_ADDRESS(SINCOS_TABLE_ADDRESS + 0x0100) const fp2_14 g_fp2_14SinPlus[] =
{
	(fp2_14)0x0000,(fp2_14)0x0199,(fp2_14)0x0331,(fp2_14)0x04C9,(fp2_14)0x0660,(fp2_14)0x07F6,(fp2_14)0x098A,(fp2_14)0x0B1E,
	(fp2_14)0x0CAF,(fp2_14)0x0E3E,(fp2_14)0x0FCB,(fp2_14)0x1156,(fp2_14)0x12DE,(fp2_14)0x1463,(fp2_14)0x15E4,(fp2_14)0x1762,
	(fp2_14)0x18DD,(fp2_14)0x1A53,(fp2_14)0x1BC5,(fp2_14)0x1D33,(fp2_14)0x1E9C,(fp2_14)0x2000,(fp2_14)0x2160,(fp2_14)0x22BA,
	(fp2_14)0x240E,(fp2_14)0x255D,(fp2_14)0x26A5,(fp2_14)0x27E8,(fp2_14)0x2924,(fp2_14)0x2A5A,(fp2_14)0x2B88,(fp2_14)0x2CB0,
	(fp2_14)0x2DD1,(fp2_14)0x2EEB,(fp2_14)0x2FFD,(fp2_14)0x3107,(fp2_14)0x320A,(fp2_14)0x3305,(fp2_14)0x33F7,(fp2_14)0x34E2,
	(fp2_14)0x35C3,(fp2_14)0x369D,(fp2_14)0x376D,(fp2_14)0x3835,(fp2_14)0x38F4,(fp2_14)0x39AA,(fp2_14)0x3A57,(fp2_14)0x3AFA,
	(fp2_14)0x3B94,(fp2_14)0x3C24,(fp2_14)0x3CAB,(fp2_14)0x3D29,(fp2_14)0x3D9C,(fp2_14)0x3E06,(fp2_14)0x3E66,(fp2_14)0x3EBC,
	(fp2_14)0x3F08,(fp2_14)0x3F4A,(fp2_14)0x3F81,(fp2_14)0x3FAF,(fp2_14)0x3FD3,(fp2_14)0x3FEC,(fp2_14)0x3FFB,(fp2_14)0x4000,
};

// High precision (2:14 bit) sin quoter minus
SDCC_FIXED_ADDRESS(SINCOS_TABLE_ADDRESS + 0x0180) const fp2_14 g_fp2_14SinMinus[] =
{
	(fp2_14)0x0000,(fp2_14)0xFE67,(fp2_14)0xFCCF,(fp2_14)0xFB37,(fp2_14)0xF9A0,(fp2_14)0xF80A,(fp2_14)0xF676,(fp2_14)0xF4E2,
	(fp2_14)0xF351,(fp2_14)0xF1C2,(fp2_14)0xF035,(fp2_14)0xEEAA,(fp2_14)0xED22,(fp2_14)0xEB9D,(fp2_14)0xEA1C,(fp2_14)0xE89E,
	(fp2_14)0xE723,(fp2_14)0xE5AD,(fp2_14)0xE43B,(fp2_14)0xE2CD,(fp2_14)0xE164,(fp2_14)0xDFFF,(fp2_14)0xDEA0,(fp2_14)0xDD46,
	(fp2_14)0xDBF2,(fp2_14)0xDAA3,(fp2_14)0xD95B,(fp2_14)0xD818,(fp2_14)0xD6DC,(fp2_14)0xD5A6,(fp2_14)0xD478,(fp2_14)0xD350,
	(fp2_14)0xD22F,(fp2_14)0xD115,(fp2_14)0xD003,(fp2_14)0xCEF9,(fp2_14)0xCDF6,(fp2_14)0xCCFB,(fp2_14)0xCC09,(fp2_14)0xCB1E,
	(fp2_14)0xCA3D,(fp2_14)0xC963,(fp2_14)0xC893,(fp2_14)0xC7CB,(fp2_14)0xC70C,(fp2_14)0xC656,(fp2_14)0xC5A9,(fp2_14)0xC506,
	(fp2_14)0xC46C,(fp2_14)0xC3DC,(fp2_14)0xC355,(fp2_14)0xC2D7,(fp2_14)0xC264,(fp2_14)0xC1FA,(fp2_14)0xC19A,(fp2_14)0xC144,
	(fp2_14)0xC0F8,(fp2_14)0xC0B6,(fp2_14)0xC07F,(fp2_14)0xC051,(fp2_14)0xC02D,(fp2_14)0xC014,(fp2_14)0xC005,(fp2_14)0xC000,
};

s16XY SinCos_s16XYInOut;