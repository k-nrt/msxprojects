//-----------------------------------------------------------------------------
//. ‚ç‚ñ‚·‚¤.
//-----------------------------------------------------------------------------
#include "msx-rand.h"

static u8 s_nRand8;
static u16 s_nRand16;

//-----------------------------------------------------------------------------
//. ‚½‚Ë.
//-----------------------------------------------------------------------------
void msxRandInit( u8 nSeed8, u16 nSeed16 )
{
	s_nRand8 = nSeed8;
	s_nRand16 = nSeed16;
}

//-----------------------------------------------------------------------------
//. 8 bit.
//-----------------------------------------------------------------------------
u8 msxRandGet8(void)
{
	u8 nBitTop, nBitMid;
	nBitTop = ( s_nRand8 & 0x80 ? 1 : 0 );
	s_nRand8 <<= 1;
	nBitMid = ( s_nRand8 & 0x08 ? 1 : 0 );
	s_nRand8 |= nBitTop ^ nBitMid;
	return s_nRand8 ^ 0xff;
}

//-----------------------------------------------------------------------------
//. 16 bit.
//-----------------------------------------------------------------------------
u16 msxRandGet16(void)
{
	u16 nBitTop, nBitMid;
	nBitTop = ( s_nRand16 & 0x8000 ? 1 : 0 );
	s_nRand16 <<= 1;
	nBitMid = ( s_nRand16 & 0x0080 ? 1 : 0 );
	s_nRand16 |= nBitTop ^ nBitMid;
	return s_nRand16 ^ 0xffff;
}

